// src/services/newsApi.js

// üéØ –®–ê–ì 1: –ò–ú–ü–û–†–¢ –ë–ê–ó–û–í–û–ì–û API
// api.js - –Ω–∞—à —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ä–∞–Ω–µ–µ —Ñ–∞–π–ª —Å –±–∞–∑–æ–≤—ã–º URL –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ axios
import api from './api';

// üéØ –®–ê–ì 2: –°–û–ó–î–ê–ï–ú –û–ë–™–ï–ö–¢ newsApi
// –≠—Ç–æ—Ç –æ–±—ä–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –í–°–ï —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤–æ—Å—Ç—è–º–∏
const newsApi = {
  
  // üéØ –®–ê–ì 3: –§–£–ù–ö–¶–ò–Ø getNews - –ì–õ–ê–í–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø
  // –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ü–æ–ª—É—á–∏—Ç—å –Ω–æ–≤–æ—Å—Ç–∏ —Å —Å–µ—Ä–≤–µ—Ä–∞ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –∏ –ø–æ–∏—Å–∫–æ–º
  // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:
  //   page = 1     - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω - –ø–µ—Ä–≤–∞—è)
  //   limit = 6    - –Ω–æ–≤–æ—Å—Ç–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–ø–æ –¢–ó 6)
  //   keyword = '' - –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å (–ø—É—Å—Ç–æ–π –µ—Å–ª–∏ –Ω–µ –∏—â–µ–º)
  getNews: async ({ page = 1, limit = 6, keyword = '' } = {}) => {
    // üéØ –§–£–ù–ö–¶–ò–Ø –í–´–ü–û–õ–ù–Ø–ï–¢–°–Ø –ö–û–ì–î–ê –ö–¢–û-–¢–û –í–´–ó–´–í–ê–ï–¢ newsApi.getNews()
    
    try {
      // üéØ –®–ê–ì 4: –ü–û–î–ì–û–¢–û–í–ö–ê –ü–ê–†–ê–ú–ï–¢–†–û–í –ó–ê–ü–†–û–°–ê
      // –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç params - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–π–¥—É—Ç –≤ URL –∫–∞–∫ ?page=1&limit=6...
      const params = { 
        page,   // –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã: page: 1
        limit   // –õ–∏–º–∏—Ç: limit: 6
      };
      
      // üéØ –®–ê–ì 5: –î–û–ë–ê–í–õ–Ø–ï–ú –ü–û–ò–°–ö –ï–°–õ–ò –û–ù –ï–°–¢–¨
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º: –µ—Å–ª–∏ keyword –Ω–µ –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ (trim —É–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–±–µ–ª—ã)
      if (keyword.trim()) {
        // üéØ –í–ê–ñ–ù–û: –ø–∞—Ä–∞–º–µ—Ç—Ä –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è keyword, –ù–ï query!
        params.keyword = keyword.trim(); // –î–æ–±–∞–≤–ª—è–µ–º keyword: "dog"
      }
      // –û–±—ä—è—Å–Ω–µ–Ω–∏–µ: API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≥–æ–≤–æ—Ä–∏—Ç —á—Ç–æ –ø–∞—Ä–∞–º–µ—Ç—Ä –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è "keyword"
      // –†–∞–Ω—å—à–µ –º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ "query" –∏ –ø–æ–∏—Å–∫ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª
      
      // üéØ –®–ê–ì 6: –î–ï–õ–ê–ï–ú –ó–ê–ü–†–û–° –ö API
      // api.get() - –º–µ—Ç–æ–¥ GET –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ axios
      // '/news' - endpoint –¥–ª—è –Ω–æ–≤–æ—Å—Ç–µ–π
      // { params } - –ø–µ—Ä–µ–¥–∞–µ–º –Ω–∞—à–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
      const response = await api.get('/news', { params });
      // await - –∂–¥–µ–º –ø–æ–∫–∞ —Å–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—Ç–∏—Ç
      // response - –æ–±—ä–µ–∫—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
      
      // üéØ –®–ê–ì 7: –í–û–ó–í–†–ê–©–ê–ï–ú –£–°–ü–ï–®–ù–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢
      // –í—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±—ä–µ–∫—Ç —Å –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π - —É–¥–æ–±–Ω–æ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
      return {
        success: true,                      // üéØ –§–õ–ê–ì –£–°–ü–ï–•–ê
        data: response.data.results || [],  // üéØ –î–ê–ù–ù–´–ï (–º–∞—Å—Å–∏–≤ –Ω–æ–≤–æ—Å—Ç–µ–π)
        pagination: {                       // üéØ –ò–ù–§–û–†–ú–ê–¶–ò–Ø –û –ü–ê–ì–ò–ù–ê–¶–ò–ò
          currentPage: response.data.page || page,
          totalPages: response.data.totalPages || 1,
          // üéØ –í–ê–ñ–ù–û: API –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç total (–æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ)
          // –í—ã—á–∏—Å–ª—è–µ–º –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ: totalPages √ó limit
          totalItems: (response.data.totalPages || 1) * limit
        }
      };
      
    } catch (error) {
      // üéØ –®–ê–ì 8: –û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–û–ö
      // –≠—Ç–æ—Ç –±–ª–æ–∫ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –µ—Å–ª–∏ –≤ try –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞
      // (–Ω–µ—Ç —Å–µ—Ç–∏, —Å–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –æ—à–∏–±–∫–∞ 404 –∏ —Ç.–¥.)
      console.error('API Error:', error);
      
      // üéØ –®–ê–ì 9: –í–û–ó–í–†–ê–©–ê–ï–ú –û–®–ò–ë–ö–£ –í –¢–û–ô –ñ–ï –°–¢–†–£–ö–¢–£–†–ï
      // –î–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±—ä–µ–∫—Ç —Å success: false
      // –≠—Ç–æ —É–¥–æ–±–Ω–æ - –≤—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ–º —Å –æ–¥–Ω–∏–º —Ñ–æ—Ä–º–∞—Ç–æ–º
      return {
        success: false,                     // üéØ –§–õ–ê–ì –û–®–ò–ë–ö–ò
        error: error.message,               // üéØ –¢–ï–ö–°–¢ –û–®–ò–ë–ö–ò
        data: [],                           // üéØ –ü–£–°–¢–û–ô –ú–ê–°–°–ò–í –î–ê–ù–ù–´–•
        pagination: {                       // üéØ –ü–ê–ì–ò–ù–ê–¶–ò–Ø –ü–û –£–ú–û–õ–ß–ê–ù–ò–Æ
          currentPage: page,
          totalPages: 1,
          totalItems: 0
        }
      };
    }
    // üéØ –ö–û–ù–ï–¶ –§–£–ù–ö–¶–ò–ò getNews
  }
  // üéØ –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –¥—Ä—É–≥–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏:
  // getNewsById, createNews, updateNews –∏ —Ç.–¥.
};

// üéØ –®–ê–ì 10: –≠–ö–°–ü–û–†–¢–ò–†–£–ï–ú –û–ë–™–ï–ö–¢
// –î–µ–ª–∞–µ–º newsApi –¥–æ—Å—Ç—É–ø–Ω—ã–º –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –≤ –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–∞—Ö
export default newsApi;