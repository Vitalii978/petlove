// üéØ –ò–º–ø–æ—Ä—Ç—ã React —Ö—É–∫–æ–≤
// useState - –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
// useEffect - –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ (–∑–∞–ø—Ä–æ—Å—ã –∫ API)
// useCallback - –¥–ª—è –º–µ–º–æ–∏–∑–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)
import { useState, useEffect, useCallback } from 'react';

// üéØ –ò–º–ø–æ—Ä—Ç—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏–∑ –Ω–∞—à–µ–π UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
import Title from '../../components/Title/Title'; // üéØ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
import SearchField from '../../components/SearchField/SearchField'; // üéØ –ü–æ–ª–µ –ø–æ–∏—Å–∫–∞
import NewsList from '../../components/News/NewsList/NewsList'; // üéØ –°–ø–∏—Å–æ–∫ –Ω–æ–≤–æ—Å—Ç–µ–π
import Pagination  from '../../components/Pagination/Pagination'; // üéØ –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º

// üéØ –ò–º–ø–æ—Ä—Ç –Ω–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API
// api - —Å–æ–∑–¥–∞–Ω–Ω—ã–π –Ω–∞–º–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä axios —Å –±–∞–∑–æ–≤—ã–º URL –∏ –∏–Ω—Ç–µ—Ä—Å–µ–ø—Ç–æ—Ä–∞–º–∏
import api from '../../services/api';

// üéØ –ò–º–ø–æ—Ä—Ç —Å—Ç–∏–ª–µ–π –∏–∑ CSS Module
// styles - –æ–±—ä–µ–∫—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –≤—Å–µ CSS –∫–ª–∞—Å—Å—ã –∏–∑ NewsPage.module.css
import styles from './NewsPage.module.css';

// üéØ –ö–û–ú–ü–û–ù–ï–ù–¢ –°–¢–†–ê–ù–ò–¶–´ –ù–û–í–û–°–¢–ï–ô
export const NewsPage = () => {
  // =============== –°–û–ó–î–ê–ù–ò–ï –°–û–°–¢–û–Ø–ù–ò–ô (STATE) –ö–û–ú–ü–û–ù–ï–ù–¢–ê ===============
  
  // üéØ –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–∞—Å—Å–∏–≤–∞ –Ω–æ–≤–æ—Å—Ç–µ–π
  // –ù–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ - –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ []
  // news - —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–æ–≤–æ—Å—Ç–µ–π)
  // setNews - —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —ç—Ç–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
  const [news, setNews] = useState([]);
  
  // üéØ –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
  // false - –¥–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
  // true - –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è (–ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ø–∏–Ω–Ω–µ—Ä)
  const [loading, setLoading] = useState(false);
  
  // üéØ –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö
  // null - –æ—à–∏–±–æ–∫ –Ω–µ—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
  // —Å—Ç—Ä–æ–∫–∞ - —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
  const [error, setError] = useState(null);
  
  // üéØ –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Ç–µ–∫—Å—Ç–∞ –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
  // –ù–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ - –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ (–ø–æ–∏—Å–∫ –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω)
  const [searchQuery, setSearchQuery] = useState('');
  
  // üéØ –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
  // –ù–∞—á–∏–Ω–∞–µ–º —Å –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
  const [currentPage, setCurrentPage] = useState(1);
  
  // üéØ –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
  // –ù–∞—á–∏–Ω–∞–µ–º —Å 1 —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
  const [totalPages, setTotalPages] = useState(1);
  
  // üéØ –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ –¥–ª—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ—Å—Ç–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
  // –ù–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ –∂–∏–∑–Ω–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
  // –ü–æ –¢–ó –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 6 –Ω–æ–≤–æ—Å—Ç–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
  const itemsPerPage = 6;
  
  // =============== –û–°–ù–û–í–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –ó–ê–ì–†–£–ó–ö–ò –ù–û–í–û–°–¢–ï–ô ===============
  
  // üéØ –§—É–Ω–∫—Ü–∏—è fetchNews –∑–∞–≥—Ä—É–∂–∞–µ—Ç –Ω–æ–≤–æ—Å—Ç–∏ —Å —Å–µ—Ä–≤–µ—Ä–∞
  // useCallback - React —Ö—É–∫ –¥–ª—è –º–µ–º–æ–∏–∑–∞—Ü–∏–∏ (–∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è) —Ñ—É–Ω–∫—Ü–∏–∏
  // –ù—É–∂–µ–Ω —á—Ç–æ–±—ã —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–≤–∞–ª–∞—Å—å –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
  const fetchNews = useCallback(
    async (page = 1, query = '') => {
      // üéØ async - —É–∫–∞–∑—ã–≤–∞–µ—Ç —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è (–º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å await)
      // üéØ (page = 1) - –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ page
      // üéØ (query = '') - –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ query
      
      try {
        // üéØ –ë–ª–æ–∫ try - –ø—ã—Ç–∞–µ–º—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–¥
        // –ï—Å–ª–∏ –∑–¥–µ—Å—å –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –æ—à–∏–±–∫–∞ - –ø–µ—Ä–µ–π–¥–µ–º –≤ –±–ª–æ–∫ catch
        
        // üéØ –ù–∞—á–∏–Ω–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏
        setLoading(true); // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º loading –≤ true (–ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ø–∏–Ω–Ω–µ—Ä)
        setError(null);   // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –æ—à–∏–±–∫–∏
        
        // üéØ –õ–æ–≥–∏—Ä—É–µ–º –Ω–∞—á–∞–ª–æ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
        console.log(`üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π: —Å—Ç—Ä–∞–Ω–∏—Ü–∞ ${page}, –ø–æ–∏—Å–∫: "${query}"`);
        
        // üéØ –í—ã–ø–æ–ª–Ω—è–µ–º GET –∑–∞–ø—Ä–æ—Å –∫ API –Ω–æ–≤–æ—Å—Ç–µ–π
        // await - –∂–¥–µ–º –æ—Ç–≤–µ—Ç–∞ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è)
        // api.get() - –º–µ—Ç–æ–¥ GET –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ axios
        // '/news' - endpoint API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π
        const response = await api.get('/news', {
          // üéØ params - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–±–∞–≤—è—Ç—Å—è –≤ URL –∫–∞–∫ query string
          params: {
            page: page,           // –ù–æ–º–µ—Ä –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            limit: itemsPerPage,  // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (6 –ø–æ –¢–ó)
            query: query || undefined, // –ü–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å (–µ—Å–ª–∏ –ø—É—Å—Ç–æ–π - undefined)
          },
        });

        console.log('üìä –î–∞–Ω–Ω—ã–µ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏:', {
  totalPages: response.data.totalPages,
  resultsLength: response.data.results?.length || 0,
  page: response.data.page,
  perPage: response.data.perPage
});
        
        // üéØ –ó–∞–ø—Ä–æ—Å —É—Å–ø–µ—à–µ–Ω, –ø–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ—Ç–≤–µ—Ç–∞
        // response.data - –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –≤–µ—Ä–Ω—É–ª —Å–µ—Ä–≤–µ—Ä
        console.log('üì¶ –ü–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç API:', response.data);
        
        // üéØ –í–ê–ñ–ù–û: API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤–æ—Å—Ç–∏ –≤ –ø–æ–ª–µ results, –∞ –Ω–µ data!
        console.log('üì∞ –ú–∞—Å—Å–∏–≤ –Ω–æ–≤–æ—Å—Ç–µ–π (response.data.results):', response.data.results);
        console.log('üî¢ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π:', response.data.results?.length || 0);
        
        // üéØ –û–ë–ù–û–í–õ–Ø–ï–ú –°–û–°–¢–û–Ø–ù–ò–Ø –ö–û–ú–ü–û–ù–ï–ù–¢–ê:
        
        // 1. –°–æ—Ö—Ä–∞–Ω—è–µ–º –º–∞—Å—Å–∏–≤ –Ω–æ–≤–æ—Å—Ç–µ–π –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
        // response.data.results - –º–∞—Å—Å–∏–≤ –Ω–æ–≤–æ—Å—Ç–µ–π –∏–∑ API
        // || [] - –µ—Å–ª–∏ results –Ω–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤
        setNews(response.data.results || []);
        
        // 2. –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü
        // response.data.totalPages - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü –∏–∑ API
        // || 1 - –µ—Å–ª–∏ totalPages –Ω–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ–º 1
        setTotalPages(response.data.totalPages || 1);
        
        // 3. –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
        setCurrentPage(page);
        
        // üéØ –õ–æ–≥–∏—Ä—É–µ–º —É—Å–ø–µ—à–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
        console.log(`‚úÖ –£—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ ${response.data.results?.length || 0} –Ω–æ–≤–æ—Å—Ç–µ–π`);
        
      } catch (err) {
        // üéØ –ë–ª–æ–∫ catch - –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –µ—Å–ª–∏ –≤ try –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞
        // err - –æ–±—ä–µ–∫—Ç –æ—à–∏–±–∫–∏ (–æ—Ç axios –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞)
        
        // üéØ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ –¥–ª—è –ø–æ–∫–∞–∑–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
        setError('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤–æ—Å—Ç–∏. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.');
        
        // üéØ –í—ã–≤–æ–¥–∏–º –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—à–∏–±–∫–µ –≤ –∫–æ–Ω—Å–æ–ª—å (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤)
        console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–æ–≤–æ—Å—Ç–µ–π:', err);
        
        // üéØ –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∏–ø –æ—à–∏–±–∫–∏ –¥–ª—è –ª—É—á—à–µ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
        if (err.response) {
          // üéØ –û—à–∏–±–∫–∞ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ (—Å—Ç–∞—Ç—É—Å 4xx –∏–ª–∏ 5xx)
          console.log('üì° –°–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—Ç–∏–ª —Å –æ—à–∏–±–∫–æ–π. –°—Ç–∞—Ç—É—Å:', err.response.status);
          console.log('üìÑ –î–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞:', err.response.data);
        } else if (err.request) {
          // üéØ –ó–∞–ø—Ä–æ—Å –±—ã–ª –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω, –Ω–æ –æ—Ç–≤–µ—Ç –Ω–µ –ø–æ–ª—É—á–µ–Ω (–Ω–µ—Ç —Å–µ—Ç–∏, —Ç–∞–π–º–∞—É—Ç)
          console.log('üì° –ù–µ—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.');
        } else {
          // üéØ –û—à–∏–±–∫–∞ –ø—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∑–∞–ø—Ä–æ—Å–∞
          console.log('‚öôÔ∏è –û—à–∏–±–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–ø—Ä–æ—Å–∞:', err.message);
        }
        
      } finally {
        // üéØ –ë–ª–æ–∫ finally - –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –í–°–ï–ì–î–ê
        // –ù–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ, –±—ã–ª–∞ –æ—à–∏–±–∫–∞ –≤ try –∏–ª–∏ –Ω–µ—Ç
        
        // üéØ –ó–∞–≤–µ—Ä—à–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏
        setLoading(false); // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º loading –≤ false (—Å–∫—Ä—ã–≤–∞–µ–º —Å–ø–∏–Ω–Ω–µ—Ä)
      }
    },
    [itemsPerPage] // üéØ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ useCallback (–ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ itemsPerPage —Ñ—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç—Å—è)
  );
  
  // =============== –≠–§–§–ï–ö–¢–´ (USE EFFECT) ===============
  
  // üéØ useEffect –¥–ª—è –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
  // –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (–ø–µ—Ä–≤–æ–º —Ä–µ–Ω–¥–µ—Ä–µ)
  useEffect(() => {
    // üéØ –í—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π
    // –°—Ç—Ä–∞–Ω–∏—Ü–∞ 1, –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è searchQuery
    fetchNews(1, searchQuery);
    
    // üéØ –ú–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π useEffect:
    // [fetchNews, searchQuery] - —ç—Ñ—Ñ–µ–∫—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —ç—Ç–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π
    // fetchNews –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∞ —Å–æ–∑–¥–∞–Ω–∞ —Å useCallback
    // searchQuery –¥–æ–±–∞–≤–ª–µ–Ω - –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–∏—Å–∫–∞ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—Ç—å –Ω–æ–≤–æ—Å—Ç–∏
  }, [fetchNews, searchQuery]);
  
  // =============== –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –°–û–ë–´–¢–ò–ô ===============
  
  // üéØ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –ø–æ–∏—Å–∫–∞
  // –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —Ç–µ–∫—Å—Ç –≤ SearchField –∏ –Ω–∞–∂–∏–º–∞–µ—Ç Enter/–ª—É–ø—É
  const handleSearch = (query) => {
    // üéØ –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏
    setSearchQuery(query);
    
    // üéØ –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–≤–æ—Å—Ç–∏ —Å –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –Ω–æ–≤—ã–º –ø–æ–∏—Å–∫–æ–≤—ã–º –∑–∞–ø—Ä–æ—Å–æ–º
    fetchNews(1, query);
  };
  
  // üéØ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
  // –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∏–∫–∞–µ—Ç –Ω–∞ –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–ª–∏ —Å—Ç—Ä–µ–ª–∫–∏
  const handlePageChange = (page) => {
    // üéØ –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–≤–æ—Å—Ç–∏ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    // –ü–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –æ—Å—Ç–∞–µ—Ç—Å—è –ø—Ä–µ–∂–Ω–∏–º (–∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è searchQuery)
    fetchNews(page, searchQuery);
  };
  
  // =============== –†–ï–ù–î–ï–† –ö–û–ú–ü–û–ù–ï–ù–¢–ê ===============
  // –≠—Ç–∞ —á–∞—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, —á—Ç–æ –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
  
  return (
    // üéØ section - —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π HTML —Ç–µ–≥ –¥–ª—è —Å–µ–∫—Ü–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ–≥–∏ –¥–ª—è –ª—É—á—à–µ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∏ SEO
    // className={styles.page} - –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ CSS –∫–ª–∞—Å—Å–∞ –∏–∑ –º–æ–¥—É–ª—è
    <section className={styles.page}>
      
      {/* üéØ div - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —à–∏—Ä–∏–Ω—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */}
      {/* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ –∏ –∑–∞–¥–∞–µ—Ç –±–æ–∫–æ–≤—ã–µ –æ—Ç—Å—Ç—É–ø—ã */}
      <div className={styles.container}>
        
        {/* üéØ –ö–û–ú–ü–û–ù–ï–ù–¢ –ó–ê–ì–û–õ–û–í–ö–ê –°–¢–†–ê–ù–ò–¶–´ */}
        {/* Title - –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ —Å—Ç—Ä–∞–Ω–∏—Ü */}
        {/* text="News" - –ø—Ä–æ–ø—Å (—Å–≤–æ–π—Å—Ç–≤–æ) —Å —Ç–µ–∫—Å—Ç–æ–º –∑–∞–≥–æ–ª–æ–≤–∫–∞ */}
        <Title text="News" />
        
        {/* üéØ –ö–û–ú–ü–û–ù–ï–ù–¢ –ü–û–õ–Ø –ü–û–ò–°–ö–ê */}
        {/* SearchField - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –≤–≤–æ–¥–∞ –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ */}
        {/* onSearch={handleSearch} - –ø–µ—Ä–µ–¥–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–∏—Å–∫–∞ */}
        {/* –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —Ç–µ–∫—Å—Ç –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –ø–æ–∏—Å–∫, */}
        {/* SearchField –≤—ã–∑–æ–≤–µ—Ç handleSearch —Å –≤–≤–µ–¥–µ–Ω–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º */}
        <SearchField onSearch={handleSearch} />
        
        {/* üéØ –£–°–õ–û–í–ù–´–ô –†–ï–ù–î–ï–†–ò–ù–ì: –°–û–°–¢–û–Ø–ù–ò–ï –ó–ê–ì–†–£–ó–ö–ò */}
        {/* –ï—Å–ª–∏ loading === true, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –±–ª–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ */}
        {/* && - –ª–æ–≥–∏—á–µ—Å–∫–∏–π –æ–ø–µ—Ä–∞—Ç–æ—Ä "–ò" (–µ—Å–ª–∏ loading true, —Ä–µ–Ω–¥–µ—Ä–∏–º div) */}
        {loading && (
          <div className={styles.loading}>
            {/* üéØ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ (—Å–ø–∏–Ω–Ω–µ—Ä) */}
            <div className={styles.spinner}></div>
            <p>–ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–≤–æ—Å—Ç–∏...</p>
          </div>
        )}
        
        {/* üéØ –£–°–õ–û–í–ù–´–ô –†–ï–ù–î–ï–†–ò–ù–ì: –°–û–°–¢–û–Ø–ù–ò–ï –û–®–ò–ë–ö–ò */}
        {/* –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∞ –∏ –Ω–µ –∏–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∞, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ */}
        {error && !loading && (
          <div className={styles.error}>
            <p>{error}</p>
            {/* üéØ –ö–Ω–æ–ø–∫–∞ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ */}
            <button
              className={styles.retryButton}
              onClick={() => fetchNews(currentPage, searchQuery)}
              type="button"
            >
              –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞
            </button>
          </div>
        )}
        
        {/* üéØ –£–°–õ–û–í–ù–´–ô –†–ï–ù–î–ï–†–ò–ù–ì: –£–°–ü–ï–®–ù–ê–Ø –ó–ê–ì–†–£–ó–ö–ê */}
        {/* –ï—Å–ª–∏ –Ω–µ –≥—Ä—É–∑–∏–º –∏ –Ω–µ—Ç –æ—à–∏–±–æ–∫, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */}
        {!loading && !error && (
          // üéØ –ò—Å–ø–æ–ª—å–∑—É–µ–º Fragment (<> </>) –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
          // Fragment –Ω–µ —Å–æ–∑–¥–∞–µ—Ç –ª–∏—à–Ω–µ–≥–æ DOM —ç–ª–µ–º–µ–Ω—Ç–∞
          <>
            {/* üéØ –ö–û–ú–ü–û–ù–ï–ù–¢ –°–ü–ò–°–ö–ê –ù–û–í–û–°–¢–ï–ô */}
            {/* NewsList - –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –º–∞—Å—Å–∏–≤ –Ω–æ–≤–æ—Å—Ç–µ–π –≤ –≤–∏–¥–µ —Å–µ—Ç–∫–∏ */}
            {/* news={news} - –ø–µ—Ä–µ–¥–∞–µ–º –º–∞—Å—Å–∏–≤ –Ω–æ–≤–æ—Å—Ç–µ–π –≤ –ø—Ä–æ–ø—Å news */}
            <NewsList news={news} />
            
            {/* üéØ –£–°–õ–û–í–ù–´–ô –†–ï–ù–î–ï–†–ò–ù–ì: –ü–ê–ì–ò–ù–ê–¶–ò–Ø */}
            {/* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–∞–≥–∏–Ω–∞—Ü–∏—é —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –±–æ–ª—å—à–µ 1 —Å—Ç—Ä–∞–Ω–∏—Ü—ã */}
            {/* totalPages > 1 - –ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω—É–∂–Ω–æ –ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é */}
            {totalPages > 1 && (
              <div className={styles.paginationWrapper}>
                {/* üéØ –ö–û–ú–ü–û–ù–ï–ù–¢ –ü–ê–ì–ò–ù–ê–¶–ò–ò */}
                <Pagination
      toPage={currentPage}        // toPage –≤–º–µ—Å—Ç–æ currentPage
      totalPages={totalPages}     // —ç—Ç–æ—Ç –æ—Å—Ç–∞–µ—Ç—Å—è
      setToPage={handlePageChange} // setToPage –≤–º–µ—Å—Ç–æ onPageChange
      numberOfPages={Array.from({length: totalPages}, (_, i) => i + 1)} // –°–æ–∑–¥–∞–µ–º –º–∞—Å—Å–∏–≤ [1, 2, 3, ..., totalPages]
                />
              </div>
            )}
          </>
        )}
        
        {/* üéØ –£–°–õ–û–í–ù–´–ô –†–ï–ù–î–ï–†–ò–ù–ì: –ü–£–°–¢–û–ô –†–ï–ó–£–õ–¨–¢–ê–¢ */}
        {/* –ï—Å–ª–∏ –Ω–æ–≤–æ—Å—Ç–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã, –Ω–æ –º–∞—Å—Å–∏–≤ –ø—É—Å—Ç–æ–π (–Ω–µ –ø—É—Ç–∞—Ç—å —Å –∑–∞–≥—Ä—É–∑–∫–æ–π!) */}
        {!loading && !error && news.length === 0 && (
          <div className={styles.empty}>
            <p>–ù–æ–≤–æ—Å—Ç–µ–π –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p>
            {/* üéØ –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –µ—Å–ª–∏ –æ–Ω –±—ã–ª */}
            {searchQuery && (
              <p className={styles.searchQuery}>
                –ü–æ –∑–∞–ø—Ä–æ—Å—É: "{searchQuery}"
              </p>
            )}
          </div>
        )}
        
      </div>
    </section>
  );
};

// üéØ –≠–ö–°–ü–û–†–¢ –ö–û–ú–ü–û–ù–ï–ù–¢–ê
// –î–µ–ª–∞–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–º –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –≤ –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–∞—Ö
export default NewsPage;